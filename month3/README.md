
---

## ✅ **مرور کلی ماه سوم**

1. **تسلط بر Spring Security** حرفه‌ای
2. **پیاده‌سازی سیستم احراز هویت امن با JWT**
3. **ساخت پروژه API امن با نقش‌های مختلف کاربری**
4. **آماده‌سازی برای تست نفوذ و شناسایی با ابزارها**

---

## 🗓️ **ماه دوم – Spring Security پیشرفته + JWT + Role Management**

---

### ✅ هفته اول: مفاهیم کامل Spring Security + فیلترها

| روز | موضوع | توضیح | تمرین |
| --- | ---------------------------------- | ---------------------------------------------------------- | -------------------------- |
| 1 | ساخت پروژه جدید با Spring Security | از Spring Initializr یک پروژه بساز با web + security + jpa | ساخت `secure-api` |
| 2 | Disable Basic Auth | حذف لاگین پیش‌فرض و سفارشی‌سازی تنظیمات | ایجاد کلاس SecurityConfig |
| 3 | تعریف یوزر در DB + Role | ساخت مدل User و Role در دیتابیس | درج کاربر تست در DB |
| 4 | پیاده‌سازی UserDetailsService | بارگذاری کاربر از DB با username | تست با username & password |
| 5 | فعال‌سازی کنترل دسترسی | endpointهایی بساز که فقط user یا admin بتونن ببینن | با `@PreAuthorize` تست کن |
| 6 | تعریف custom login endpoint | `/api/login` بساز، فرم رو حذف کن | فقط JSON بفرسته |
| 7 | تست نقش‌ها و محدودیت‌ها با Postman | تست login → دریافت token → استفاده برای دسترسی | role user vs admin |

---

### ✅ هفته دوم: JWT (JSON Web Token) – احراز هویت بدون Session

| روز | موضوع | توضیح | تمرین |
| --- | ------------------------------- | -------------------------------------- | ------------------------------- |
| 1 | مقدمه JWT | ساختار، Header, Payload, Signature | ابزار: [jwt.io](https://jwt.io) |
| 2 | ساخت کلاس JWTUtil | شامل متد generateToken و validateToken | استفاده از `io.jsonwebtoken` |
| 3 | ایجاد فیلتر JWT برای هر درخواست | با OncePerRequestFilter پیاده‌سازی کن | بررسی Header → استخراج کاربر |
| 4 | اتصال JWT به SecurityContext | اگه token معتبر بود، کاربر رو معتبر کن | بدون Session |
| 5 | پاسخ login → JWT | بعد از لاگین موفق، JWT بده به کاربر | ذخیره در LocalStorage مرورگر |
| 6 | محافظت از endpointها با JWT | بدون JWT → 403 بده | با JWT → OK |
| 7 | تمرین و تست کلی | همه مراحل رو با Postman تست کن | بررسی تاریخ انقضا، امضای اشتباه |

---

### ✅ هفته سوم: توسعه API امن با نقش‌های مختلف

| روز | موضوع | توضیح | تمرین |
| --- | ---------------------------- | ----------------------------------------------- | ------------------------------- |
| 1 | تعریف roleهای مختلف | USER, ADMIN, SUPER\_ADMIN | در DB با Relation ذخیره کن |
| 2 | ساخت API مدیریت کاربران | فقط ADMIN بتونه لیست ببینه | `GET /api/users` فقط برای admin |
| 3 | امکان تغییر نقش کاربران | فقط SUPER\_ADMIN مجاز به تغییر نقش‌ها | endpoint `PUT /api/users/role` |
| 4 | لاگ کردن فعالیت‌ها | ذخیره IP، زمان و endpoint در DB | ساخت AuditService |
| 5 | محافظت از مسیرها | هر نقش فقط به endpoint خودش دسترسی داشته باشه | با `@PreAuthorize` |
| 6 | ایجاد مستندات API با Swagger | مستند کن که کدوم نقش به چی دسترسی داره | اضافه کردن Swagger |
| 7 | تمرین پروژه | پیاده‌سازی کل API مدیریت کاربران با دسترسی کامل | |

---

### ✅ هفته چهارم: رمزنگاری، تست امنیت و تمرین WebGoat

| روز | موضوع | توضیح | تمرین |
| --- | ------------------------------- | ------------------------------------------ | ------------------------------ |
| 1 | رمزنگاری رمز عبور | مرور BCrypt و جلوگیری از plaintext | تست رمزنگاری |
| 2 | جلوگیری از brute-force login | محدود کردن لاگین با ip یا زمان | پیاده‌سازی با throttle ساده |
| 3 | تعریف Security Headers | CSP, X-Frame, X-Content | اضافه‌کردن با Filter در Spring |
| 4 | نصب ZAP + تست endpointها | اسکن اپ با [ZAP](https://www.zaproxy.org/) | بررسی هشدارها |
| 5 | تمرین WebGoat – احراز هویت ضعیف | انجام یکی از مراحل مربوط به login | تمرین real-world |
| 6 | جمع‌بندی پروژه | اپ کامل ثبت‌نام، لاگین با JWT، نقش‌ها | آماده‌سازی GitHub |
| 7 | انتشار در GitHub + README | مستندات نحوه کار، API، نحوه ایمن‌سازی | بارگذاری نهایی |

---

## 🎯 خروجی پایان ماه دوم:

🔐 پروژه کامل API امن:

* با لاگین و ثبت‌نام
* با رمزنگاری
* با نقش‌های متفاوت
* با JWT Token
* با مستندات Swagger
* قابل انتشار در GitHub

---

## 🧰 ابزارهای این ماه:

| ابزار | کاربرد |
| --------------- | ----------------------- |
| Spring Security | کنترل دسترسی |
| JWT (jjwt) | احراز هویت بدون session |
| Postman | تست دستی API |
| Swagger | مستندسازی API |
| OWASP ZAP | تست امنیتی خودکار |
| WebGoat | تمرین حملات رایج امنیتی |

---
